<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Definiciones de patrones y gradientes -->
  <defs>
    <pattern id="presentationPattern" patternUnits="userSpaceOnUse" width="4" height="4">
      <rect width="4" height="4" fill="#E3F2FD"/>
      <rect x="0" y="0" width="2" height="2" fill="#BBDEFB"/>
      <rect x="2" y="2" width="2" height="2" fill="#BBDEFB"/>
    </pattern>
    <pattern id="experiencePattern" patternUnits="userSpaceOnUse" width="4" height="4">
      <rect width="4" height="4" fill="#F3E5F5"/>
      <rect x="0" y="0" width="2" height="2" fill="#CE93D8"/>
      <rect x="2" y="2" width="2" height="2" fill="#CE93D8"/>
    </pattern>
    <pattern id="businessPattern" patternUnits="userSpaceOnUse" width="4" height="4">
      <rect width="4" height="4" fill="#FFF3E0"/>
      <rect x="0" y="0" width="2" height="2" fill="#FFCC80"/>
      <rect x="2" y="2" width="2" height="2" fill="#FFCC80"/>
    </pattern>
    <pattern id="dataPattern" patternUnits="userSpaceOnUse" width="4" height="4">
      <rect width="4" height="4" fill="#E8F5E8"/>
      <rect x="0" y="0" width="2" height="2" fill="#A5D6A7"/>
      <rect x="2" y="2" width="2" height="2" fill="#A5D6A7"/>
    </pattern>
    
    <!-- Definición de flecha -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#37474F"/>
    </marker>
  </defs>
  
  <!-- Título -->
  <text x="700" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#2C3E50">
    ARQUITECTURA DE 4 CAPAS CON APIs - SISTEMA DE GESTIÓN DOCUMENTARIA
  </text>
  
  <!-- Usuario externo -->
  <circle cx="30" cy="120" r="22" fill="#90A4AE" stroke="#37474F" stroke-width="2"/>
  <text x="30" y="126" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">USER</text>
  
  <!-- CAPA DE PRESENTACIÓN -->
  <g id="presentation-layer">
    <rect x="70" y="60" width="1300" height="120" fill="url(#presentationPattern)" stroke="#1976D2" stroke-width="2" rx="5"/>
    <text x="90" y="85" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1976D2">
      CAPA DE PRESENTACIÓN
    </text>
    
    <!-- Componentes de presentación -->
    <rect x="100" y="100" width="100" height="50" fill="#E3F2FD" stroke="#1976D2" stroke-width="2" rx="3"/>
    <text x="150" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1976D2">Portal Web</text>
    <text x="150" y="132" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1976D2">Principal</text>
    
   
  </g>
  
  <!-- CAPA DE EXPERIENCIA -->
  <g id="experience-layer">
    <rect x="70" y="220" width="1300" height="200" fill="url(#experiencePattern)" stroke="#7B1FA2" stroke-width="2" rx="5"/>
    <text x="90" y="245" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7B1FA2">
      CAPA DE EXPERIENCIA (API GATEWAY)
    </text>
    
    <!-- APIs de Experiencia -->
    <rect x="100" y="260" width="110" height="70" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2" rx="3"/>
    <text x="155" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#7B1FA2">API UX-LOGUEO</text>
    <text x="155" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">POST /auth/login</text>
    <text x="155" y="307" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">POST /auth/logout</text>
    <text x="155" y="319" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">GET /auth/refresh</text>
    
    <rect x="230" y="260" width="110" height="70" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2" rx="3"/>
    <text x="285" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#7B1FA2">API UX-USUARIO</text>
    <text x="285" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">GET /users</text>
    <text x="285" y="307" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">POST /users</text>
    <text x="285" y="319" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">PUT /users/{id}</text>
    
    <rect x="360" y="260" width="110" height="70" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2" rx="3"/>
    <text x="415" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#7B1FA2">API UX-DOCUMENTO</text>
    <text x="415" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">GET /documents</text>
    <text x="415" y="307" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">POST /documents</text>
    <text x="415" y="319" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">PUT /documents/{id}</text>
    
    <rect x="490" y="260" width="110" height="70" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2" rx="3"/>
    <text x="545" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#7B1FA2">API UX-BUSQUEDA</text>
    <text x="545" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">POST /derive</text>
    <text x="545" y="307" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">GET /derivations</text>
    <text x="545" y="319" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7B1FA2">PUT /accept</text>
    

    
    
    
    
  </g>
  
  <!-- CAPA DE NEGOCIOS -->
  <g id="business-layer">
    <rect x="70" y="460" width="1300" height="180" fill="url(#businessPattern)" stroke="#F57C00" stroke-width="2" rx="5"/>
    <text x="90" y="485" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#F57C00">
      CAPA DE NEGOCIOS
    </text>
    
    <!-- Servicios de negocio -->
    <rect x="100" y="500" width="140" height="65" fill="#FFF3E0" stroke="#F57C00" stroke-width="2" rx="3"/>
    <text x="170" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#F57C00">API BS-DERIVACIONES</text>

    
    <rect x="260" y="500" width="140" height="65" fill="#FFF3E0" stroke="#F57C00" stroke-width="2" rx="3"/>
    <text x="330" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#F57C00">API BS-NOSTIFICACION</text>
 
    
    <rect x="420" y="500" width="140" height="65" fill="#FFF3E0" stroke="#F57C00" stroke-width="2" rx="3"/>
    <text x="490" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#F57C00">API BS-VALIDACIONES</text>
  
    
    <rect x="580" y="500" width="140" height="65" fill="#FFF3E0" stroke="#F57C00" stroke-width="2" rx="3"/>
    <text x="650" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#F57C00">API BS-VALIDACIONES</text>

    
    <rect x="740" y="500" width="140" height="65" fill="#FFF3E0" stroke="#F57C00" stroke-width="2" rx="3"/>
    <text x="810" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#F57C00">API BS-AREA </text>
  
    
    <rect x="900" y="500" width="140" height="65" fill="#FFF3E0" stroke="#F57C00" stroke-width="2" rx="3"/>
    <text x="970" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#F57C00">API BS-AUDITORIA</text>

    
   
  </g>
  
  <!-- CAPA DE ACCESO A DATOS -->
  <g id="data-layer">
    <rect x="70" y="680" width="1300" height="280" fill="url(#dataPattern)" stroke="#2E7D32" stroke-width="2" rx="5"/>
    <text x="90" y="705" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2E7D32">
      CAPA DE ACCESO A DATOS
    </text>
    
    <!-- Repositorios -->
    
    <!-- ORM -->
    <rect x="800" y="720" width="160" height="60" fill="#DCEDC8" stroke="#33691E" stroke-width="2" rx="3"/>
    <text x="880" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#33691E">ORM / DATA ACCESS LAYER</text>

  </g>
 

  
 